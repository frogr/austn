:verbose: false
:concurrency: 5
:timeout: 25

:queues:
  - [critical, 3]
  - [gpu, 3]  # GPU-intensive tasks (AI chat, image generation)
  - [default, 2]
  - [low, 1]
  - [mailers, 2]

:scheduler:
  :schedule:
    gpu_health_check:
      cron: '0 * * * *'  # Every hour at minute 0
      class: GpuHealthCheckJob
      queue: default
      description: "Check GPU service health status"
    story_generation:
      cron: '*/30 * * * *'  # Every 30 minutes
      class: StoryGenerationJob
      queue: default
      description: "Generate next paragraph for Endless Story"

# GPU queue configuration
# Run a separate Sidekiq process for GPU tasks:
# bundle exec sidekiq -q gpu -c 1
gpu_queue:
  :concurrency: 1  # Only one GPU task at a time
  :timeout: 300    # 5 minutes for GPU operations

production:
  :concurrency: 10

development:
  :concurrency: 2