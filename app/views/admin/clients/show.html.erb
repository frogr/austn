<div class="container mx-auto px-2 sm:px-4 py-4 sm:py-8 max-w-4xl">
  <% if notice.present? %>
    <div class="mb-4 p-3 rounded-md bg-green-900/50 text-green-300 border border-green-700 text-sm"><%= notice %></div>
  <% end %>

  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4">
    <div>
      <h1 class="font-black mb-1" style="font-size: clamp(1.5rem, 3vw, 2rem); color: var(--text-primary); letter-spacing: -0.03em;">
        <%= @client.name %>
      </h1>
      <p class="text-gray-400 text-sm"><%= @client.email %></p>
    </div>
    <div class="flex gap-2">
      <%= link_to admin_clients_path, class: "inline-flex items-center gap-1 font-semibold py-2 px-4 rounded-md transition duration-200 text-white bg-gray-700 hover:bg-gray-600 text-sm" do %>
        All Clients
      <% end %>
      <%= link_to edit_admin_client_path(@client), class: "inline-flex items-center gap-1 font-semibold py-2 px-4 rounded-md transition duration-200 text-white bg-yellow-600 hover:bg-yellow-500 text-sm" do %>
        <span class="material-icons" style="font-size: 16px;">edit</span> Edit
      <% end %>
      <%= link_to new_admin_invoice_path(client_id: @client.id), class: "inline-flex items-center gap-1 font-semibold py-2 px-4 rounded-md transition duration-200 text-white bg-green-600 hover:bg-green-500 text-sm" do %>
        <span class="material-icons" style="font-size: 16px;">add</span> New Invoice
      <% end %>
    </div>
  </div>

  <!-- Stats -->
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6">
    <div class="p-4 rounded-lg" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);">
      <p class="text-2xl font-bold text-white"><%= format_money(@client.total_invoiced_cents) %></p>
      <p class="text-gray-400 text-sm">Total Invoiced</p>
    </div>
    <div class="p-4 rounded-lg" style="background: rgba(29, 185, 84, 0.1); border: 1px solid rgba(29, 185, 84, 0.2);">
      <p class="text-2xl font-bold" style="color: var(--accent-color);"><%= format_money(@client.total_paid_cents) %></p>
      <p class="text-gray-400 text-sm">Total Paid</p>
    </div>
    <div class="p-4 rounded-lg" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);">
      <p class="text-2xl font-bold text-red-400"><%= format_money(@client.outstanding_cents) %></p>
      <p class="text-gray-400 text-sm">Outstanding</p>
    </div>
  </div>

  <!-- Client Info -->
  <div class="rounded-lg p-6 mb-6" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);">
    <h3 class="text-white font-semibold mb-3">Address</h3>
    <p class="text-gray-300 text-sm"><%= @client.address_line1 %></p>
    <% if @client.address_line2.present? %>
      <p class="text-gray-300 text-sm"><%= @client.address_line2 %></p>
    <% end %>
    <p class="text-gray-300 text-sm"><%= @client.city %>, <%= @client.state %> <%= @client.zip %></p>
    <% if @client.notes.present? %>
      <div class="mt-4 pt-3" style="border-top: 1px solid rgba(255,255,255,0.05);">
        <p class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1">Internal Notes</p>
        <p class="text-gray-400 text-sm"><%= @client.notes %></p>
      </div>
    <% end %>
  </div>

  <!-- Client Invoices -->
  <div class="rounded-lg overflow-hidden" style="background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08);">
    <div class="px-4 py-3" style="background: rgba(255,255,255,0.03);">
      <h3 class="text-white font-semibold">Invoices</h3>
    </div>
    <% if @invoices.any? %>
      <div class="overflow-x-auto">
        <table class="w-full">
          <thead>
            <tr style="background: rgba(255,255,255,0.02);">
              <th class="text-left px-4 py-2 text-sm font-semibold text-gray-400">Invoice #</th>
              <th class="text-left px-4 py-2 text-sm font-semibold text-gray-400">Date</th>
              <th class="text-right px-4 py-2 text-sm font-semibold text-gray-400">Total</th>
              <th class="text-center px-4 py-2 text-sm font-semibold text-gray-400">Status</th>
            </tr>
          </thead>
          <tbody class="divide-y" style="border-color: rgba(255,255,255,0.05);">
            <% @invoices.each do |invoice| %>
              <tr class="hover:bg-white/5 transition-colors">
                <td class="px-4 py-3 text-sm">
                  <%= link_to invoice.invoice_number, admin_invoice_path(invoice), class: "text-white font-medium hover:text-green-400 transition-colors" %>
                </td>
                <td class="px-4 py-3 text-sm text-gray-400"><%= invoice.issue_date.strftime("%b %d, %Y") %></td>
                <td class="px-4 py-3 text-sm text-white text-right font-medium"><%= format_money(invoice.total_cents) %></td>
                <td class="px-4 py-3 text-sm text-center"><%= invoice_status_badge(invoice.status) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="text-center py-8 px-4">
        <p class="text-gray-500 text-sm">No invoices for this client yet.</p>
      </div>
    <% end %>
  </div>

  <div class="flex items-center justify-between mt-6 pt-4" style="border-top: 1px solid rgba(255,255,255,0.05);">
    <%= link_to admin_clients_path, class: "text-gray-500 hover:text-gray-300 text-sm" do %>Back to Clients<% end %>
    <%= link_to "Delete Client", admin_client_path(@client), data: { turbo_method: :delete, turbo_confirm: "Delete this client and all their invoices?" }, class: "text-red-500 hover:text-red-400 text-sm" %>
  </div>
</div>
