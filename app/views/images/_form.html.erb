<%= form_with(model: image) do |form| %>
  <% if image.errors.any? %>
    <div class="mb-6 p-4 bg-red-900/50 border border-red-600 rounded-lg">
      <h3 class="text-red-400 font-semibold mb-2">
        <%= pluralize(image.errors.count, "error") %> prohibited this image from being saved:
      </h3>
      <ul class="list-disc list-inside text-red-300">
        <% image.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="space-y-6">
    <div>
      <%= form.label :title, class: "block text-sm font-medium text-gray-300 mb-2" %>
      <%= form.text_field :title,
                          class: "w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",
                          placeholder: "Enter image title" %>
    </div>

    <div>
      <%= form.label :description, class: "block text-sm font-medium text-gray-300 mb-2" %>
      <%= form.text_area :description,
                         rows: 4,
                         class: "w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",
                         placeholder: "Enter image description (optional)" %>
    </div>

    <div>
      <%= form.label :file, "Image File", class: "block text-sm font-medium text-gray-300 mb-2" %>
      <%= form.file_field :file,
                          class: "w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",
                          accept: "image/*" %>
      <% if image.file.attached? %>
        <div class="mt-2">
          <p class="text-sm text-gray-400 mb-2">Current image:</p>
          <%= image_tag image.file.variant(resize_to_limit: [200, 200]),
                        class: "rounded-lg border border-gray-600" %>
        </div>
      <% end %>
    </div>

    <div class="grid grid-cols-2 gap-4">
      <div>
        <%= form.label :position, class: "block text-sm font-medium text-gray-300 mb-2" %>
        <%= form.number_field :position,
                              class: "w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-blue-500",
                              placeholder: "Display order (optional)" %>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-300 mb-2">Status</label>
        <div class="flex items-center mt-3">
          <%= form.check_box :published,
                             class: "mr-2 rounded border-gray-600 bg-gray-800 text-blue-600 focus:ring-blue-500" %>
          <%= form.label :published, "Published", class: "text-gray-300" %>
        </div>
      </div>
    </div>

    <div class="flex gap-3">
      <%= form.submit class: "px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition cursor-pointer" %>
      <%= link_to "Cancel", images_path,
                  class: "px-6 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition" %>
    </div>
  </div>
<% end %>